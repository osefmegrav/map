<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr-FR" xml:lang="fr-FR" >

<head>
<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<meta name="author" content="Guillaume Brioudes https://myllaume.fr/" />
<meta name="author" content="Arthur Perret https://www.arthurperret.fr/" />
<meta name="dcterms.date" content="2021-03-11" />
<title>Documentation de l’Opensphère</title>

<link rel="stylesheet" href="style.css" />

</head>

<body>


<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#installation"><span class="toc-section-number">1</span> Installation</a>
<ul>
<li><a href="#pre-requis"><span class="toc-section-number">1.1</span> Pré-requis</a></li>
<li><a href="#telechargement"><span class="toc-section-number">1.2</span> Téléchargement</a></li>
</ul></li>
<li><a href="#format-des-donnees"><span class="toc-section-number">2</span> Format des données</a>
<ul>
<li><a href="#entites"><span class="toc-section-number">2.1</span> Entités</a></li>
<li><a href="#liens"><span class="toc-section-number">2.2</span> Liens</a></li>
</ul></li>
<li><a href="#generation-des-donnees"><span class="toc-section-number">3</span> Génération des données</a>
<ul>
<li><a href="#google-sheets"><span class="toc-section-number">3.1</span> Google Sheets</a></li>
<li><a href="#airtable"><span class="toc-section-number">3.2</span> Airtable</a></li>
<li><a href="#gephi"><span class="toc-section-number">3.3</span> Gephi</a></li>
</ul></li>
<li><a href="#integration-des-donnees"><span class="toc-section-number">4</span> Intégration des données</a>
<ul>
<li><a href="#entites-1"><span class="toc-section-number">4.1</span> Entités</a></li>
<li><a href="#liens-1"><span class="toc-section-number">4.2</span> Liens</a></li>
<li><a href="#groupes"><span class="toc-section-number">4.3</span> Groupes</a></li>
<li><a href="#images"><span class="toc-section-number">4.4</span> Images</a></li>
<li><a href="#affichage-lateral"><span class="toc-section-number">4.5</span> Affichage latéral</a></li>
<li><a href="#filtres"><span class="toc-section-number">4.6</span> Filtres</a></li>
</ul></li>
<li><a href="#liste-alphabetique-des-entites"><span class="toc-section-number">5</span> Liste alphabétique des entités</a></li>
<li><a href="#langues"><span class="toc-section-number">6</span> Langues</a>
<ul>
<li><a href="#donnees"><span class="toc-section-number">6.1</span> Données</a></li>
<li><a href="#selecteur-de-langue"><span class="toc-section-number">6.2</span> Sélecteur de langue</a></li>
<li><a href="#elements-dinterface"><span class="toc-section-number">6.3</span> Éléments d’interface</a></li>
</ul></li>
<li><a href="#publication"><span class="toc-section-number">7</span> Publication</a></li>
<li><a href="#exemples-dutilisation"><span class="toc-section-number">8</span> Exemples d’utilisation</a></li>
<li><a href="#credits"><span class="toc-section-number">9</span> Crédits</a>
<ul>
<li><a href="#equipe"><span class="toc-section-number">9.1</span> Équipe</a></li>
<li><a href="#historique-du-projet"><span class="toc-section-number">9.2</span> Historique du projet</a></li>
<li><a href="#bibliotheques-utilisees"><span class="toc-section-number">9.3</span> Bibliothèques utilisées</a></li>
</ul></li>
</ul>
</nav>

<main>
<article>
<h1 class="title">Documentation de l’Opensphère</h1>
<p>L’Opensphère est un logiciel de cartographie relationnelle interactive conçu par l’équipe du programme de recherche ANR <a href="https://hyperotlet.hypotheses.org/">HyperOtlet</a>.</p>
<p>Les fonctionnalités du logiciel et leur utilisation sont décrites dans le <a href="https://hyperotlet.github.io/otletosphere/">manuel d’utilisation</a> de l’<a href="http://hyperotlet.huma-num.fr/otletosphere/">Otletosphère</a>, qui constitue l’origine du projet (voir les <a href="#exemples-dutilisation">exemples d’utilisation</a> plus bas).</p>
<p>Cette documentation s’adresse aux personnes souhaitant réutiliser le code de l’Opensphère.</p>
<div class="important">
<p>Tout au long de ce guide, nous vous renverrons vers <strong>l’index de l’API</strong>. Il vous permettra de retrouver et comprendre les parties du code à modifier ainsi que les fonctions clés, vous permettant de réutiliser les fonctionnalités de l’Opensphère.</p>
<p><a href="https://hyperotlet.github.io/opensphere/api/" class="uri">https://hyperotlet.github.io/opensphere/api/</a></p>
</div>
<p>L’Opensphère a été conçue pour faciliter la réutilisation. Son fonctionnement nécessite uniquement un serveur web local ou en ligne. Le code est écrit en JavaScript mais il n’est pas nécessaire de connaître ce langage pour s’approprier le logiciel : il suffit de modifier le code aux endroits indiqués dans cette documentation pour l’adapter à ses données et métadonnées. Quelques <a href="https://developer.mozilla.org/fr/docs/Learn/Getting_started_with_the_web/HTML_basics">notions de base en HTML</a> peuvent être utiles. La documentation s’adresse également aux personnes maîtrisant JavaScript, avec des ressources permettant personnaliser le logiciel en profondeur.</p>
<p>L’Opensphère est faite pour afficher des jeux de données d’une taille plutôt modeste : au-delà de 800 entités, les performances du logiciel diminuent (variable selon les navigateurs web).</p>
<div class="sommaire">
<ol type="1">
<li><a href="#installation">Installation</a></li>
<li><a href="#format-des-donnees">Format des données</a></li>
<li><a href="#generation-des-donnees">Génération des données</a></li>
<li><a href="#integration-des-donnees">Intégration des données</a></li>
<li><a href="#langues">Langues</a></li>
<li><a href="#publication">Publication</a></li>
<li><a href="#exemples-dutilisation">Exemples d’utilisation</a></li>
<li><a href="#credits">Crédits</a></li>
</ol>
</div>
<h1 data-number="1" id="installation"><span class="header-section-number">1</span> Installation</h1>
<h2 data-number="1.1" id="pre-requis"><span class="header-section-number">1.1</span> Pré-requis</h2>
<p>Un serveur web est requis pour faire fonctionner l’Opensphère. En effet, les fichiers de données ne peuvent être utilisés par le logiciel que grâce à des protocoles propres aux serveurs.</p>
<p>Pour afficher l’Opensphère en local, utilisez un logiciel comme <a href="https://www.wampserver.com/">WAMP</a> (Windows), <a href="https://www.mamp.info/fr/downloads/">MAMP</a> (Windows, macOS) ou <a href="https://www.apachefriends.org/fr/index.html">XAMP</a> (Windows, macOS, Linux).</p>
<p>Pour héberger l’Opensphère en ligne, il vous faudra un moyen de transférer les fichiers de l’Opensphère sur un serveur, par exemple avec un client FTP comme <a href="https://filezilla-project.org/">FileZilla</a> (Windows, macOS, Linux).</p>
<h2 data-number="1.2" id="telechargement"><span class="header-section-number">1.2</span> Téléchargement</h2>
<p>Le code de l’Opensphère est hébergé sur GitHub : <a href="https://github.com/hyperotlet/opensphere" class="uri">https://github.com/hyperotlet/opensphere</a>. Pour télécharger la dernière version, rendez-vous sur <a href="https://github.com/hyperotlet/opensphere/releases">la page des téléchargements</a>.</p>
<p>Vous pouvez également cloner le dépôt via un client Git, comme par exemple <a href="https://desktop.github.com/">GitHub Desktop</a> (Windows, macOS), ou via un terminal en saisissant la commande suivante :</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">git</span> clone https://github.com/hyperotlet/opensphere.git</span></code></pre></div>
<p>Déplacez le dossier <code>opensphere</code> dans le dossier racine de votre serveur, ou bien configurez votre serveur pour faire du dossier <code>opensphere</code> la racine.</p>
<h1 data-number="2" id="format-des-donnees"><span class="header-section-number">2</span> Format des données</h1>
<p>L’Opensphère requiert que les données décrivant les entités et leurs relations soient contenues séparément dans deux fichiers <a href="https://developer.mozilla.org/fr/docs/Learn/JavaScript/Objects/JSON">JSON</a> nommés respectivement <code>entites.json</code> et <code>liens.json</code>. Ces deux fichiers doivent être placés dans le répertoire <code>/data</code>.</p>
<p>L’Opensphère utilise la bibliothèque de visualisation [Vis.js]. Celle-ci impose la présence de certaines métadonnées.</p>
<h2 data-number="2.1" id="entites"><span class="header-section-number">2.1</span> Entités</h2>
<p>En raison de l’utilisation de [Vis.js], l’Opensphère requiert que les entités soient décrites au minimum via quatre métadonnées : un identifiant unique, un nom, une description et un groupe. Dans le jeu de données, les noms de ces quatre métadonnées peuvent être choisis de manière arbitraire. La description peut être vide, mais la métadonnée doit être présente.</p>
<p>L’exemple ci-dessous constitue une version simplifiée du fichier <code>entites.json</code> :</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb2-1"><a href="#cb2-1"></a><span class="ot">[</span><span class="fu">{</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>    <span class="dt">&quot;nom&quot;</span><span class="fu">:</span> <span class="st">&quot;Paul Otlet&quot;</span><span class="fu">,</span></span>
<span id="cb2-3"><a href="#cb2-3"></a>    <span class="dt">&quot;identifiant&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></span>
<span id="cb2-4"><a href="#cb2-4"></a>    <span class="dt">&quot;groupe&quot;</span><span class="fu">:</span> <span class="st">&quot;Personne&quot;</span><span class="fu">,</span></span>
<span id="cb2-5"><a href="#cb2-5"></a>    <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Fondateur du Mundaneum&quot;</span></span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="fu">}</span><span class="ot">,</span></span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="fu">{</span></span>
<span id="cb2-8"><a href="#cb2-8"></a>    <span class="dt">&quot;nom&quot;</span><span class="fu">:</span> <span class="st">&quot;Mundaneum&quot;</span><span class="fu">,</span></span>
<span id="cb2-9"><a href="#cb2-9"></a>    <span class="dt">&quot;identifiant&quot;</span><span class="fu">:</span> <span class="dv">2</span><span class="fu">,</span></span>
<span id="cb2-10"><a href="#cb2-10"></a>    <span class="dt">&quot;groupe&quot;</span><span class="fu">:</span> <span class="st">&quot;Institution&quot;</span><span class="fu">,</span></span>
<span id="cb2-11"><a href="#cb2-11"></a>    <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Le projet phare de Paul Otlet&quot;</span></span>
<span id="cb2-12"><a href="#cb2-12"></a><span class="fu">}</span><span class="ot">]</span></span></code></pre></div>
<div class="astuce">
<p>L’<a href="#integration-des-donnees">intégration des données</a> nécessite de relier chaque métadonnée à une constante dont le nom doit respecter la nomenclature de [Vis.js] : <code>label</code>, <code>id</code>, <code>group</code> et <code>title</code>. Pour éviter toute confusion lors de cette étape, on peut choisir de donner ces noms aux métadonnées dès le départ :</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb3-1"><a href="#cb3-1"></a><span class="ot">[</span><span class="fu">{</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>    <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Paul Otlet&quot;</span><span class="fu">,</span></span>
<span id="cb3-3"><a href="#cb3-3"></a>    <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></span>
<span id="cb3-4"><a href="#cb3-4"></a>    <span class="dt">&quot;group&quot;</span><span class="fu">:</span> <span class="st">&quot;Personne&quot;</span><span class="fu">,</span></span>
<span id="cb3-5"><a href="#cb3-5"></a>    <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Fondateur du Mundaneum&quot;</span></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="fu">}</span><span class="ot">,</span></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="fu">{</span></span>
<span id="cb3-8"><a href="#cb3-8"></a>    <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Mundaneum&quot;</span><span class="fu">,</span></span>
<span id="cb3-9"><a href="#cb3-9"></a>    <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="dv">2</span><span class="fu">,</span></span>
<span id="cb3-10"><a href="#cb3-10"></a>    <span class="dt">&quot;group&quot;</span><span class="fu">:</span> <span class="st">&quot;Institution&quot;</span><span class="fu">,</span></span>
<span id="cb3-11"><a href="#cb3-11"></a>    <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Le projet phare de Paul Otlet&quot;</span></span>
<span id="cb3-12"><a href="#cb3-12"></a><span class="fu">}</span><span class="ot">]</span></span></code></pre></div>
</div>
<p>Vous pouvez ajouter autant de métadonnées que vous le souhaitez pour chaque entité. Ceci permet notamment de décliner les informations dans plusieurs <a href="#langues">langues</a>. L’exemple ci-dessous montre un extrait des données de l’<a href="http://hyperotlet.huma-num.fr/otletosphere/">Otletosphère</a>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb4-1"><a href="#cb4-1"></a><span class="ot">[</span><span class="fu">{</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>    <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Paul Otlet&quot;</span><span class="fu">,</span></span>
<span id="cb4-3"><a href="#cb4-3"></a>    <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></span>
<span id="cb4-4"><a href="#cb4-4"></a>    <span class="dt">&quot;group&quot;</span><span class="fu">:</span> <span class="st">&quot;Personne&quot;</span><span class="fu">,</span></span>
<span id="cb4-5"><a href="#cb4-5"></a>    <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Fondateur du Mundaneum&quot;</span><span class="fu">,</span></span>
<span id="cb4-6"><a href="#cb4-6"></a>    <span class="dt">&quot;annee_naissance&quot;</span><span class="fu">:</span> <span class="dv">1868</span><span class="fu">,</span></span>
<span id="cb4-7"><a href="#cb4-7"></a>    <span class="dt">&quot;annee_mort&quot;</span><span class="fu">:</span> <span class="dv">1944</span><span class="fu">,</span></span>
<span id="cb4-8"><a href="#cb4-8"></a>    <span class="dt">&quot;pays&quot;</span><span class="fu">:</span> <span class="st">&quot;Belgique&quot;</span><span class="fu">,</span></span>
<span id="cb4-9"><a href="#cb4-9"></a>    <span class="dt">&quot;pays_en&quot;</span><span class="fu">:</span> <span class="st">&quot;Belgium&quot;</span><span class="fu">,</span></span>
<span id="cb4-10"><a href="#cb4-10"></a>    <span class="dt">&quot;domaine&quot;</span><span class="fu">:</span> <span class="st">&quot;Bibliographie&quot;</span><span class="fu">,</span></span>
<span id="cb4-11"><a href="#cb4-11"></a>    <span class="dt">&quot;domaine_en&quot;</span><span class="fu">:</span> <span class="st">&quot;Bibliography&quot;</span><span class="fu">,</span></span>
<span id="cb4-12"><a href="#cb4-12"></a>    <span class="dt">&quot;lien_wikipedia&quot;</span><span class="fu">:</span><span class="st">&quot;https://fr.wikipedia.org/wiki/Paul_Otlet&quot;</span><span class="fu">,</span></span>
<span id="cb4-13"><a href="#cb4-13"></a>    <span class="dt">&quot;lien_wikipedia_en&quot;</span><span class="fu">:</span><span class="st">&quot;https://en.wikipedia.org/wiki/Paul_Otlet&quot;</span></span>
<span id="cb4-14"><a href="#cb4-14"></a><span class="fu">}</span><span class="ot">]</span></span></code></pre></div>
<h2 data-number="2.2" id="liens"><span class="header-section-number">2.2</span> Liens</h2>
<p>En raison de l’utilisation de [Vis.js], l’Opensphère requiert que les liens soient décrits au minimum via quatre métadonnées : un identifiant unique, un point de départ, un point d’arrivée et une description. Les points de départ et d’arrivée correspondent à des identifiants d’entités. Les identifiants des liens eux-mêmes sont indépendents de ceux des entités. Exemple : le lien <code>1</code> relie les entités <code>1</code> et <code>2</code>. La description peut être vide, mais la métadonnée doit être présente.</p>
<p>L’exemple ci-dessous constitue une version simplifiée du fichier <code>liens.json</code> :</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb5-1"><a href="#cb5-1"></a><span class="ot">[</span><span class="fu">{</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>    <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></span>
<span id="cb5-3"><a href="#cb5-3"></a>    <span class="dt">&quot;from&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></span>
<span id="cb5-4"><a href="#cb5-4"></a>    <span class="dt">&quot;to&quot;</span><span class="fu">:</span> <span class="dv">2</span><span class="fu">,</span></span>
<span id="cb5-5"><a href="#cb5-5"></a>    <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Paul Otlet est le fondateur du Mundaneum.&quot;</span></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="fu">}</span><span class="ot">]</span></span></code></pre></div>
<div class="astuce">
<p>Ici également, vous pouvez anticiper l’étape d’<a href="#integration-des-donnees">intégration des données</a> en nommant les métadonnées conformément à la nomenclature de [Vis.js]. C’est le cas dans l’exemple ci-dessus.</p>
</div>
<h1 data-number="3" id="generation-des-donnees"><span class="header-section-number">3</span> Génération des données</h1>
<p>Générer des données au format requis pour l’Opensphère nécessite de disposer d’outils permettant la saisie des données, leur mise en relation par un système d’identifiants uniques, et leur export au format JSON.</p>
<h2 data-number="3.1" id="google-sheets"><span class="header-section-number">3.1</span> Google Sheets</h2>
<p>Un modèle Google Sheets pour l’Opensphère est disponible à l’adresse suivante : <a href="https://docs.google.com/spreadsheets/d/1hiONQ5SM82vKTAzMH2NRU3nNGQMToOU-TGaTfxxT0u4/edit?usp=sharing" class="uri">https://docs.google.com/spreadsheets/d/1hiONQ5SM82vKTAzMH2NRU3nNGQMToOU-TGaTfxxT0u4/edit?usp=sharing</a></p>
<p><a href="https://www.google.com/sheets/about/">Google Sheets</a> est un tableur classique, qui repose sur des formules pour contrôler la saisie des données. Notre modèle inclut des formules, notamment pour faire correspondre automatiquement les identifiants d’une feuille à l’autre. Afin de ne pas rencontrer de difficultés, n’oubliez pas d’étendre les formules sur plusieurs lignes après avoir saisi des données.</p>
<p>La saisie des données concernant les entités se fait dans la feuille « Entités ». La saisie des données concernant leurs relations se fait dans la feuille « Liens ». La feuille « Extraction » doit être remplie automatiquement grâce une formule qui remplace les noms des identités par les identifiants correspondants (grâce à la <a href="https://support.google.com/docs/answer/3093318?hl=fr">fonction <code>RECHERCHEV</code></a>. Ceci permet de saisir les relations dans une interface confortable (la feuille « Liens ») tout en exportant les données au format requis depuis une feuille ad hoc (la feuille « Extraction »).</p>
<p>Pour exporter les données au format JSON, installez l’extension <a href="https://workspace.google.com/marketplace/app/export_sheet_data/903838927001">Export Sheet Data</a> depuis l’onglet <code>Modules complémentaires</code> dans Google Sheets.</p>
<p>Une fois l’extension installée, cliquez sur <code>Modules complémentaires</code> › <code>Export Sheet Data</code> › <code>Open Sidebar</code>. Suivez les instructions détaillées dans la feuille « Notice export » pour exporter les feuilles « Entités » et « Extraction ».</p>
<h2 data-number="3.2" id="airtable"><span class="header-section-number">3.2</span> Airtable</h2>
<p>Un modèle Airtable pour l’Opensphère est disponible à l’adresse suivante : <a href="https://airtable.com/shrBRlWxvzFatUoFF/tblHqN5RE9z7j5HdU/viwn2Q7y4fijyAfSs" class="uri">https://airtable.com/shrBRlWxvzFatUoFF/tblHqN5RE9z7j5HdU/viwn2Q7y4fijyAfSs</a></p>
<p><a href="https://airtable.com/">Airtable</a> est un logiciel qui permet d’utiliser une base de données via l’interface d’un tableur collaboratif en ligne. <a href="https://support.airtable.com/hc/en-us">Une documentation</a> est disponible en anglais. Notre modèle inclut des règles qui permettent de contrôler la saisie des données.</p>
<p>Les tables « entites » et « liens » peuvent être exportées au format CSV. Vous devrez utiliser un <a href="http://convertcsv.com/json-to-csv.htm">convertisseur CSV-JSON</a> pour obtenir les fichiers <code>entites.json</code> et <code>liens.json</code> requis.</p>
<h2 data-number="3.3" id="gephi"><span class="header-section-number">3.3</span> Gephi</h2>
<p>Un modèle Gephi pour l’Opensphère est disponible à l’adresse suivante : <a href="https://drive.google.com/file/d/1A_b12rrpGjw11JHGPsAA4pnlQMYFOmTX/view?usp=sharing" class="uri">https://drive.google.com/file/d/1A_b12rrpGjw11JHGPsAA4pnlQMYFOmTX/view?usp=sharing</a></p>
<p><a href="https://gephi.org">Gephi</a> est un logiciel qui permet de construire et analyser des graphes et des réseaux. Il inclut notamment une interface d’édition des données sous forme de tableur qui facilite la création d’entités (<em>nodes</em>) et de liens (<em>edges</em>).</p>
<p>Le plugin <a href="https://gephi.org/plugins/#/plugin/jsonexporter-plugin">JSON Exporter</a> pour Gephi permet de générer un fichier au format JSON. Dans Gephi, cliquez sur <code>Outils</code> › <code>Modules d'extension</code> puis cherchez le plugin et installez-le. Une fois le plugin installé, pour exporter vos données cliquez sur <code>Fichier</code> › <code>Export</code> › <code>Fichier de graphe…</code> puis dans le menu déroulant <code>Format de fichier</code>, sélectionnez <code>JSON Graph (*.json)</code>. Traitez ensuite les données pour qu’elles soient lisibles par l’Opensphère :</p>
<ul>
<li>Effacez les chaînes de caractères <code>"attributes":{</code> et <code>}</code> qui encadrent les attributs de chaque entité. Utilisez par exemple des expressions régulières : cherchez <code>"attributes":{([^}]+)}</code> et remplacez les résultats par <code>\1</code>.</li>
<li>Copiez et enregistrez le contenu des objets <code>nodes</code> et <code>edges</code> dans des fichiers séparés intitulés respectivement <code>entites.json</code> et <code>liens.json</code>.</li>
</ul>
<h1 data-number="4" id="integration-des-donnees"><span class="header-section-number">4</span> Intégration des données</h1>
<p>Une fois les fichiers <code>entites.json</code> et <code>liens.json</code> placés dans le répertoire <code>/data</code>, il faut modifier le code de l’Opensphère pour</p>
<ol type="1">
<li>sérialiser les données (les adapter au traitement),</li>
<li>intégrer les données dans l’interface.</li>
</ol>
<h2 data-number="4.1" id="entites-1"><span class="header-section-number">4.1</span> Entités</h2>
<p>Voici un extrait simplifié de la <a href="https://hyperotlet.github.io/opensphere/api/Fetch_entites.html">commande d’intégration des données dans le système</a> :</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb6-1"><a href="#cb6-1"></a>graph<span class="op">.</span><span class="at">nodes</span> <span class="op">=</span> entites</span>
<span id="cb6-2"><a href="#cb6-2"></a>    <span class="op">.</span><span class="fu">filter</span>(entite <span class="kw">=&gt;</span> entite<span class="op">.</span><span class="at">id</span>)</span>
<span id="cb6-3"><a href="#cb6-3"></a>    <span class="op">.</span><span class="fu">map</span>(<span class="kw">function</span>(entite) {</span>
<span id="cb6-4"><a href="#cb6-4"></a>        <span class="cf">return</span> {</span>
<span id="cb6-5"><a href="#cb6-5"></a>            <span class="dt">id</span><span class="op">:</span> entite<span class="op">.</span><span class="at">id</span><span class="op">,</span></span>
<span id="cb6-6"><a href="#cb6-6"></a>            <span class="dt">label</span><span class="op">:</span> entite<span class="op">.</span><span class="at">nom</span><span class="op">,</span></span>
<span id="cb6-7"><a href="#cb6-7"></a>            <span class="dt">title</span><span class="op">:</span> entite<span class="op">.</span><span class="at">titre</span><span class="op">,</span></span>
<span id="cb6-8"><a href="#cb6-8"></a>            <span class="dt">group</span><span class="op">:</span> entite<span class="op">.</span><span class="at">groupe</span><span class="op">,</span></span>
<span id="cb6-9"><a href="#cb6-9"></a>            <span class="dt">image</span><span class="op">:</span><span class="st">&#39;./assets/photos/&#39;</span> <span class="op">+</span> entite<span class="op">.</span><span class="at">photo</span><span class="op">,</span></span>
<span id="cb6-10"><a href="#cb6-10"></a>            <span class="dt">age</span><span class="op">:</span> <span class="bu">Number</span>(entite<span class="op">.</span><span class="at">age</span>) <span class="op">+</span> <span class="dv">6</span><span class="op">,</span></span>
<span id="cb6-11"><a href="#cb6-11"></a>            <span class="dt">Fr</span><span class="op">:</span> {</span>
<span id="cb6-12"><a href="#cb6-12"></a>                <span class="dt">title</span><span class="op">:</span> entite<span class="op">.</span><span class="at">description</span></span>
<span id="cb6-13"><a href="#cb6-13"></a>            }<span class="op">,</span></span>
<span id="cb6-14"><a href="#cb6-14"></a>            <span class="dt">En</span><span class="op">:</span> {</span>
<span id="cb6-15"><a href="#cb6-15"></a>                <span class="dt">title</span><span class="op">:</span> entite<span class="op">.</span><span class="at">description_en</span></span>
<span id="cb6-16"><a href="#cb6-16"></a>            }</span>
<span id="cb6-17"><a href="#cb6-17"></a>        }<span class="op">;</span></span></code></pre></div>
<p>Cette structure de contrôle permet de faire correspondre les métadonnées (les entêtes de colonnes dans le tableur, ex : <code>nom</code>, <code>groupe</code>) à des constantes JavaScript (ex : <code>label</code>, <code>group</code>). Ce sont ces constantes qui sont ensuite utilisées dans tout le logiciel pour pouvoir retrouver manipuler les métadonnées correspondante.</p>
<p>Par exemple, la fonction <a href="./api/global.html#getNodeMetas">getNodeMetas()</a> permet de retrouver la liste de ces mêmes contantes avec les valeurs pour une entités appelée (par son identifiant <code>id</code>).</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb7-1"><a href="#cb7-1"></a>getNodeMetas(<span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="co">// =&gt; { id: 1, label: &#39;Paul Otlet&#39;, title: &#39;fondateur&#39;, description: &#39;Morbi ac augue&#39;… }</span></span></code></pre></div>
<p>Le schéma ci-dessous permet de bien retracer le processus de sérialisation des données, depuis le tableur, jusqu’aux constantes.</p>
<figure>
<img src="transfert-data.svg" width="350" alt="" /><figcaption>Intégration des données</figcaption>
</figure>
<p>Chaque métadonnée est préfixée par le nom du jeu de données auquel elle appartient (ici <code>entite</code>, puis <code>lien</code> dans la section suivante de la documentation). On fait correspondre cette métadonnée préfixée à une constante. Par exemple, la métadonnée <code>titre</code> est appelée sous la forme <code>entite.titre</code> et associée à une constante <code>title</code>.</p>
<div class="important">
<p>Trois constantes sont obligatoires et doivent être nommées telles quelles dans la structure de contrôle : <code>label</code>, <code>id</code>, <code>group</code>. La constante <code>image</code> doit être renseignée si vous souhaitez <a href="#images">ajouter des images</a>. Les autres constantes sont facultatives et peuvent être nommées de manière arbitraire.</p>
</div>
<p>Les constantes peuvent être définies en incluant des transformations, comme par exemple en effectuant une opération mathématique, logiques, sur une métadonnée.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb8-1"><a href="#cb8-1"></a><span class="cf">return</span> {</span>
<span id="cb8-2"><a href="#cb8-2"></a>    <span class="co">// si l&#39;entité n&#39;a pas de valeur pour la métadonnée &#39;metier&#39;</span></span>
<span id="cb8-3"><a href="#cb8-3"></a>    <span class="co">// dans le tableur alors sa valeur est &#39;métier inconnu&#39;</span></span>
<span id="cb8-4"><a href="#cb8-4"></a>    <span class="dt">job</span><span class="op">:</span> ((<span class="op">!</span>entite<span class="op">.</span><span class="at">metier</span>) <span class="op">?</span> <span class="kw">undefined</span> <span class="op">:</span> <span class="st">&#39;métier inconnu&#39;</span>)</span>
<span id="cb8-5"><a href="#cb8-5"></a>}</span></code></pre></div>
<p>Pour associer des métadonnées dans différentes langues à une même constante, voir la section <a href="#langues">Langues</a> plus bas.</p>
<h2 data-number="4.2" id="liens-1"><span class="header-section-number">4.2</span> Liens</h2>
<p>L’<a href="https://hyperotlet.github.io/opensphere/api/Fetch_links.html">intégration des données représentant les relations (liens)</a> utilise une structure de contrôle similaire.</p>
<p>Exemple :</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb9-1"><a href="#cb9-1"></a>graph<span class="op">.</span><span class="at">links</span> <span class="op">=</span> liens</span>
<span id="cb9-2"><a href="#cb9-2"></a>    <span class="op">.</span><span class="fu">filter</span>(lien <span class="kw">=&gt;</span> lien<span class="op">.</span><span class="at">id</span> <span class="op">&amp;&amp;</span> lien<span class="op">.</span><span class="at">from</span> <span class="op">&amp;&amp;</span> lien<span class="op">.</span><span class="at">to</span>)</span>
<span id="cb9-3"><a href="#cb9-3"></a>    <span class="op">.</span><span class="fu">map</span>(<span class="kw">function</span>(lien) {</span>
<span id="cb9-4"><a href="#cb9-4"></a>        <span class="cf">return</span> {</span>
<span id="cb9-5"><a href="#cb9-5"></a>            <span class="dt">id</span><span class="op">:</span> lien<span class="op">.</span><span class="at">id</span><span class="op">,</span></span>
<span id="cb9-6"><a href="#cb9-6"></a>            <span class="dt">source</span><span class="op">:</span> lien<span class="op">.</span><span class="at">from</span><span class="op">,</span></span>
<span id="cb9-7"><a href="#cb9-7"></a>            <span class="dt">target</span><span class="op">:</span> lien<span class="op">.</span><span class="at">to</span><span class="op">,</span></span>
<span id="cb9-8"><a href="#cb9-8"></a>            <span class="dt">title</span><span class="op">:</span> lien<span class="op">.</span><span class="at">label</span><span class="op">,</span></span>
<span id="cb9-9"><a href="#cb9-9"></a></span>
<span id="cb9-10"><a href="#cb9-10"></a>            <span class="dt">Fr</span><span class="op">:</span> {</span>
<span id="cb9-11"><a href="#cb9-11"></a>                <span class="dt">title</span><span class="op">:</span> lien<span class="op">.</span><span class="at">label</span></span>
<span id="cb9-12"><a href="#cb9-12"></a>            }<span class="op">,</span></span>
<span id="cb9-13"><a href="#cb9-13"></a>            <span class="dt">En</span><span class="op">:</span> {</span>
<span id="cb9-14"><a href="#cb9-14"></a>                <span class="dt">title</span><span class="op">:</span> lien<span class="op">.</span><span class="at">label_en</span></span>
<span id="cb9-15"><a href="#cb9-15"></a>            }<span class="op">,</span></span>
<span id="cb9-16"><a href="#cb9-16"></a>        }</span>
<span id="cb9-17"><a href="#cb9-17"></a>    })<span class="op">;</span></span></code></pre></div>
<h2 data-number="4.3" id="groupes"><span class="header-section-number">4.3</span> Groupes</h2>
<p>Lors de l’<a href="#entites-1">intégration des données</a>, une constante <code>group</code> doit être déclarée pour chaque entité. Cette constante est pensée pour correspondre à une catégorisation des entités et ainsi les colorer, filtrer.</p>
<div class="important">
<p>L’Opensphère permet d’ajouter d’autres constantes (liées à d’autres métadonnées) qui jouent un rôle de filtre (voir la section <a href="#filtres">Filtres</a> plus bas). Mais seule la constante <code>group</code> peut être utilisée pour définir des paramètres liés à la colorisation des noeuds et liens.</p>
</div>
<p>La coloration (des noeuds, des liens, des boutons de filtres liés à tel groupe de noeuds) se fait via la fonction <a href="./api/global.html#chooseColor"><code>chooseColor()</code></a>. En son sein, vous devez pour chacun de vos groupes inscrire un <code>case</code> contenant le nom du groupe (en repsectant la casse) puis la couleur associée (au format RVB). Par défaut, vos entités auront une couleur grise.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb10-1"><a href="#cb10-1"></a><span class="kw">function</span> <span class="fu">chooseColor</span>(name) {</span>
<span id="cb10-2"><a href="#cb10-2"></a>    <span class="cf">switch</span> (name) {</span>
<span id="cb10-3"><a href="#cb10-3"></a>        <span class="cf">case</span> <span class="st">&#39;collegues&#39;</span><span class="op">:</span></span>
<span id="cb10-4"><a href="#cb10-4"></a>            color <span class="op">=</span> <span class="st">&#39;154, 60, 154&#39;</span><span class="op">;</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb10-5"><a href="#cb10-5"></a>        <span class="cf">case</span> <span class="st">&#39;collaborateurs&#39;</span><span class="op">:</span></span>
<span id="cb10-6"><a href="#cb10-6"></a>            color <span class="op">=</span> <span class="st">&#39;97, 172, 97&#39;</span><span class="op">;</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb10-7"><a href="#cb10-7"></a>        <span class="cf">default</span><span class="op">:</span></span>
<span id="cb10-8"><a href="#cb10-8"></a>            color <span class="op">=</span> <span class="st">&#39;169, 169, 169&#39;</span><span class="op">;</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb10-9"><a href="#cb10-9"></a>    }</span>
<span id="cb10-10"><a href="#cb10-10"></a>}</span></code></pre></div>
<h2 data-number="4.4" id="images"><span class="header-section-number">4.4</span> Images</h2>
<p>Par défaut, toutes les entités doivent être associées à une image, une métadonnée <code>image</code>. Chaque entité peut avoir sa propre image, ou bien la partager avec d’autres entités.</p>
<div class="astuce">
<p>L’<a href="http://hyperotlet.huma-num.fr/otletosphere/">Otletosphère</a> et l’<a href="http://hyperotlet.huma-num.fr/opendatasphère/">OpenDataSphère</a> montrent deux façons d’envisager l’utilisation des images : la première utilise des photographies pour mettre en valeur les personnes, tandis que la seconde utilise des icônes qui font ressortir les catégories des entités.</p>
</div>
<p>Les images doivent être placées dans le répertoire <code>/assets/images</code>. La métadonnée utilisée pour déclarer l’image associée à une entité doit contenir le nom complet du fichier (nom et extension). Exemple : <code>nom_image.jpg</code>.</p>
<div class="astuce">
<p>Pensez à bien redimensionner et compresser vos images pour leur intégration. Elles peuvent largement ralentir l’affichage du site.</p>
</div>
<p>L’intégration de la métadonnée se fait via une constante <code>image</code>. Exemple avec une métadonnée intitulée <code>photo</code> :</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb11-1"><a href="#cb11-1"></a><span class="cf">return</span> {</span>
<span id="cb11-2"><a href="#cb11-2"></a>    <span class="dt">image</span><span class="op">:</span> <span class="st">&#39;./assets/photos/&#39;</span> <span class="op">+</span> entite<span class="op">.</span><span class="at">photo</span><span class="vs">`</span></span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="vs">}</span></span></code></pre></div>
<p>Si vous ne souhaitez pas utiliser d’images, vous devez modifier la constante <a href="./api/Graph.html#.nodeContainImage"><code>graph.nodeContainImage</code></a> et lui donner la valeur <code>false</code>.</p>
<h2 data-number="4.5" id="affichage-lateral"><span class="header-section-number">4.5</span> Affichage latéral</h2>
<p>L’affichage des métadonnées dans l’Opensphère reprend la logique de la <strong>fiche</strong>, incarnée par un panneau latéral situé à droite de l’interface. Le paramétrage de cette « fiche » consiste à modifier le fichier <code>index.html</code> pour créer des champs faisant appel aux différentes constantes définies lors de l’<a href="#entites-1">intégration des données</a>.</p>
<p>Dans le fichier <code>index.html</code>, la région du code à modifier est imbriqué dans la balise <code>&lt;div id="fiche-content"&gt;</code>.</p>
<p>Pour ajouter un champ, ajoutez un élément <code>span</code> ou <code>div</code> portant l’attribut <code>data-meta</code>. La valeur de cet attribut doit être l’une des constantes définies lors de l’<a href="#entites-1">intégration des données</a>. L’élement doit rester vide (la balise fermante suit immédiatement la balise ouvrante). Lorsqu’une entité est sélectionnée dans l’interface de l’Opensphère, le logiciel remplit automatiquement chaque balise portant l’attribut <code>data-meta</code> présent dans le volet avec la valeur des métadonnées correspondantes.</p>
<p>Exemple :</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb12-1"><a href="#cb12-1"></a><span class="kw">&lt;aside</span><span class="ot"> id=</span><span class="st">&quot;fiche&quot;</span><span class="kw">&gt;</span></span>
<span id="cb12-2"><a href="#cb12-2"></a>    …</span>
<span id="cb12-3"><a href="#cb12-3"></a>    <span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;fiche-content&quot;</span><span class="kw">&gt;</span></span>
<span id="cb12-4"><a href="#cb12-4"></a>        …</span>
<span id="cb12-5"><a href="#cb12-5"></a>        <span class="kw">&lt;span</span><span class="ot"> data-meta=</span><span class="st">&quot;title&quot;</span><span class="kw">&gt;&lt;/span&gt;</span></span>
<span id="cb12-6"><a href="#cb12-6"></a>        <span class="kw">&lt;span</span><span class="ot"> data-meta=</span><span class="st">&quot;group&quot;</span><span class="kw">&gt;&lt;/span&gt;</span></span>
<span id="cb12-7"><a href="#cb12-7"></a>        <span class="kw">&lt;div</span><span class="ot"> data-meta=</span><span class="st">&quot;description&quot;</span><span class="kw">&gt;&lt;/div&gt;</span></span>
<span id="cb12-8"><a href="#cb12-8"></a>    <span class="kw">&lt;/div&gt;</span></span>
<span id="cb12-9"><a href="#cb12-9"></a><span class="kw">&lt;/aside&gt;</span></span></code></pre></div>
<h2 data-number="4.6" id="filtres"><span class="header-section-number">4.6</span> Filtres</h2>
<p>L’Opensphère inclut un système de filtres qui permettent d’afficher ou de cacher les entités en fonction d’un paramètre donné.</p>
<p>Les boutons s’affichent soit dans l’entête du site pour les grands écrans (affichage <em>« desktop »</em> ), soit dans un menu accessible depuis le bouton entonnoir en haut à droite de la zone d’affichage du graphe, pour les petits écrans (affichage <em>« mobile »</em> ). Ils sont créés via le fichier <code>index.html</code> à deux endroits distincts : ligne ~160 pour les boutons <em>desktop</em> et ligne ~260 pour les boutons <em>mobile</em>.</p>
<p>Chaque filtre correspond à un élément <code>button</code> avec la classe <code>btn-group</code>, un attribut <code>data-type</code> et un attribut <code>data-meta</code>. La valeur de <code>data-type</code> doit être l’une des constantes définies lors de l’<a href="#entites-1">intégration des données</a> : c’est le paramètre sur lequel doit jouer le filtre. La valeur de l’attribut <code>data-meta</code> correspond à la valeur affectée à cette même constante pour que l’entité soit filtrée. Le texte situé entre les deux balises est affiché dans le bouton.</p>
<p>Ce mécanisme permet d’utiliser plusieurs modes de catégorisation dans un même jeu de données, comme le montre l’exemple ci-dessous :</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb13-1"><a href="#cb13-1"></a><span class="kw">&lt;button</span><span class="ot"> class=</span><span class="st">&quot;btn-group&quot;</span><span class="ot"> data-type=</span><span class="st">&quot;group&quot;</span><span class="ot"> data-meta=</span><span class="st">&quot;politique&quot;</span><span class="kw">&gt;</span>Politique<span class="kw">&lt;/button&gt;</span></span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="kw">&lt;button</span><span class="ot"> class=</span><span class="st">&quot;btn-group&quot;</span><span class="ot"> data-type=</span><span class="st">&quot;type&quot;</span><span class="ot"> data-meta=</span><span class="st">&quot;personne&quot;</span><span class="kw">&gt;</span>Personne<span class="kw">&lt;/button&gt;</span></span></code></pre></div>
<p>Ceci implique que les constantes <code>group</code> et <code>type</code> aient bien été définies au préalable lors de l’<a href="#entites-1">intégration des données</a>.</p>
<h1 data-number="5" id="liste-alphabetique-des-entites"><span class="header-section-number">5</span> Liste alphabétique des entités</h1>
<p>La vue “Fiches” (accessible via la navigation, en haut de page) permet de consulter la liste de toutes les entités du graphe sous forme de cartes. Elles sont rangées dans l’ordre alphabétique (d’après les <a href="./api/Board.html#.init">opérations d’initialisation</a>) selon la constante <code>sortName</code> définie lors de l’<a href="#entites-1">intégration des données</a>. Vous pouvez écrire différents algorithmes permettant de transformer la valeur effectée à cette variable <code>sortName</code> et ainsi modifier l’ordre d’affichage de cette liste alphabétique.</p>
<h1 data-number="6" id="langues"><span class="header-section-number">6</span> Langues</h1>
<p>L’Opensphère peut afficher des informations en plusieurs langues, aussi bien au niveau des données que de l’interface.</p>
<p>Il est recommandé d’utiliser les codes de langue définis par la norme <a href="https://www.iso.org/iso-639-language-codes.html">ISO 639</a> pour désigner les différentes langues à la fois dans les données, le code et l’interface.</p>
<div class="important">
<p>Les codes de langue sont sensibles à la casse, et la règle n’est pas la même selon le type des fichiers dans lesquels ils sont utilisés :</p>
<ul>
<li>dans le fichier <code>main.js</code>, lors de l’<a href="#entites-1">intégration des données</a> ou de la <a href="./api/main.js.html#line1202">personnalisation du module de langue</a>, la première lettre doit être majuscule (ex : <code>Fr</code>) ;</li>
<li>dans le fichier <code>index.html</code>, dans les attributs, les codes de langue doivent être en minuscules (ex : <code>fr</code>).</li>
</ul>
</div>
<h2 data-number="6.1" id="donnees"><span class="header-section-number">6.1</span> Données</h2>
<p>Pour les données, la gestion des langues se prévoit lors de l’<a href="#entites-1">intégration des données</a>. En procédant par langue, il faut associer chaque constante à la métadonnée correspondante pour la langue en question. Les métadonnées qui correspondent à la langue « par défaut » doivent être traitées de la même manière, ce qui ne remplace pas la définition initiale des constantes : elles sont donc présentes deux fois.</p>
<p>Exemple :</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb14-1"><a href="#cb14-1"></a><span class="cf">return</span> {</span>
<span id="cb14-2"><a href="#cb14-2"></a>    <span class="co">// valeurs par défaut</span></span>
<span id="cb14-3"><a href="#cb14-3"></a>    <span class="dt">label</span><span class="op">:</span> entite<span class="op">.</span><span class="at">nom</span><span class="op">,</span></span>
<span id="cb14-4"><a href="#cb14-4"></a>    <span class="dt">title</span><span class="op">:</span> entite<span class="op">.</span><span class="at">description</span><span class="op">,</span></span>
<span id="cb14-5"><a href="#cb14-5"></a>    <span class="co">// valeurs par langue</span></span>
<span id="cb14-6"><a href="#cb14-6"></a>    <span class="dt">Fr</span><span class="op">:</span> {</span>
<span id="cb14-7"><a href="#cb14-7"></a>        <span class="dt">label</span><span class="op">:</span> entite<span class="op">.</span><span class="at">nom</span><span class="op">,</span></span>
<span id="cb14-8"><a href="#cb14-8"></a>        <span class="dt">title</span><span class="op">:</span> entite<span class="op">.</span><span class="at">description</span></span>
<span id="cb14-9"><a href="#cb14-9"></a>    }<span class="op">,</span></span>
<span id="cb14-10"><a href="#cb14-10"></a>    <span class="dt">En</span><span class="op">:</span> {</span>
<span id="cb14-11"><a href="#cb14-11"></a>        <span class="dt">label</span><span class="op">:</span> entite<span class="op">.</span><span class="at">nom_en</span><span class="op">,</span></span>
<span id="cb14-12"><a href="#cb14-12"></a>        <span class="dt">title</span><span class="op">:</span> entite<span class="op">.</span><span class="at">description_en</span></span>
<span id="cb14-13"><a href="#cb14-13"></a>    }<span class="op">,</span></span>
<span id="cb14-14"><a href="#cb14-14"></a>    <span class="dt">Ru</span><span class="op">:</span> {</span>
<span id="cb14-15"><a href="#cb14-15"></a>        <span class="dt">label</span><span class="op">:</span> entite<span class="op">.</span><span class="at">nom_ru</span><span class="op">,</span></span>
<span id="cb14-16"><a href="#cb14-16"></a>        <span class="dt">title</span><span class="op">:</span> entite<span class="op">.</span><span class="at">description_ru</span></span>
<span id="cb14-17"><a href="#cb14-17"></a>    }</span>
<span id="cb14-18"><a href="#cb14-18"></a>}</span></code></pre></div>
<h2 data-number="6.2" id="selecteur-de-langue"><span class="header-section-number">6.2</span> Sélecteur de langue</h2>
<p>Un sélecteur situé en haut à droite de l’interface permet de changer de langue à la volée. Pour ajouter une langue, localisez l’élément <code>&lt;section class="lang-box"&gt;</code>, vers la ligne 150 du fichier <code>index.html</code>. Ajoutez à l’intérieur un <code>div</code> avec un attribut <code>data-lang</code> : la valeur de l’attribut doit être la constante que vous avez définie pour la langue en question, la valeur du <code>div</code> sera le texte affiché sur le bouton.</p>
<p>Exemple :</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb15-1"><a href="#cb15-1"></a><span class="kw">&lt;div</span><span class="ot"> data-lang=</span><span class="st">&quot;Ru&quot;</span><span class="kw">&gt;</span>Russe<span class="kw">&lt;/div&gt;</span></span></code></pre></div>
<h2 data-number="6.3" id="elements-dinterface"><span class="header-section-number">6.3</span> Éléments d’interface</h2>
<p>Pour traduire un élément de l’interface via un le sélecteur de langue, ajoutez-y un attribut <code>data-lang-&lt;code&gt;</code> ayant pour valeur la traduction de l’élément, en remplaçant <code>&lt;code&gt;</code> par la constante correspondant à la langue de la traduction, définie précédemment. Attention, comme indiqué plus haut la casse est différente : on écrira <code>fr</code> et pas <code>Fr</code>.</p>
<p>Exemple :</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb16-1"><a href="#cb16-1"></a><span class="kw">&lt;p</span><span class="ot"> data-lang-ru=</span><span class="st">&quot;traduction en russe&quot;</span><span class="ot"> data-lang-fr=</span><span class="st">&quot;texte en français&quot;</span><span class="kw">&gt;</span>texte d’origine en français<span class="kw">&lt;/p&gt;</span></span></code></pre></div>
<h1 data-number="7" id="publication"><span class="header-section-number">7</span> Publication</h1>
<p>L’Opensphère se présente sous la forme d’un fichier <code>index.html</code> pensé pour être publié sur le Web. Pour faciliter la tâche des programmes d’indexation et de moissonnage du Web, vous pouvez compléter les métadonnées incluses dans le <code>head</code> du fichier <code>index.html</code>, notamment les attributs <code>content</code> et <code>href</code> vides ou contenant du texte par défaut.</p>
<p>Avant de publier l’Opensphère, il est recommandé de prévisualiser l’affichage via un serveur web local. Utilisez <a href="https://qastack.fr/webmasters/8525/how-do-i-open-the-javascript-console-in-different-browsers">la console du navigateur web</a> pour consulter les messages d’erreur en cas de problème.</p>
<p>Les répertoires et fichiers à déposer sur un serveur afin de publier l’Opensphère sont les suivants :</p>
<ul>
<li><code>assets/</code></li>
<li><code>data/</code></li>
<li><code>libs/</code></li>
<li><code>.htaccess</code></li>
<li><code>index.html</code></li>
</ul>
<div class="important">
<p>Le fichier <code>.htaccess</code> inclut des règles destinées au serveur qui permettent de circuler entre les données. Il est indispensable au fonctionnement de l’Opensphère. Par conséquent, celle-ci ne peut fonctionner que sur un serveur permettant d’inclure un fichier <code>.htaccess</code>. Ceci exclut certain services gratuits comme GitHub Pages.</p>
</div>
<h1 data-number="8" id="exemples-dutilisation"><span class="header-section-number">8</span> Exemples d’utilisation</h1>
<dl>
<dt>Otletosphère</dt>
<dd>Cartographie relationnelle autour de Paul Otlet réalisée par l’équipe du programme de recherche ANR <a href="https://hyperotlet.hypotheses.org/">HyperOtlet</a>
</dd>
<dd>Site : <a href="http://hyperotlet.huma-num.fr/otletosphere/" class="uri">http://hyperotlet.huma-num.fr/otletosphere/</a>
</dd>
<dd>Code source : <a href="https://github.com/hyperotlet/otletosphere" class="uri">https://github.com/hyperotlet/otletosphere</a>
</dd>
<dt>OpenDataSphère</dt>
<dd>Cartographie relationnelle de l’open data francophone réalisée par les étudiantes et étudiants de la <a href="http://www.infonumbordeaux.fr/mind/">licence professionnelle MIND</a>.
</dd>
<dd>Site : <a href="http://hyperotlet.huma-num.fr/opendatasphere/" class="uri">http://hyperotlet.huma-num.fr/opendatasphere/</a>
</dd>
<dd>Code source : <a href="https://github.com/hyperotlet/opendatasphere" class="uri">https://github.com/hyperotlet/opendatasphere</a>
</dd>
</dl>
<h1 data-number="9" id="credits"><span class="header-section-number">9</span> Crédits</h1>
<h2 data-number="9.1" id="equipe"><span class="header-section-number">9.1</span> Équipe</h2>
<ul>
<li><a href="http://www.guidedesegares.info">Olivier Le Deuff</a> (chef de projet)</li>
<li><a href="https://myllaume.fr/">Guillaume Brioudes</a> (développeur)</li>
<li><a href="https://www.arthurperret.fr">Arthur Perret</a> (chercheur)</li>
<li><a href="https://mica.u-bordeaux-montaigne.fr/borel-clement/">Clément Borel</a> (chercheur)</li>
</ul>
<h2 data-number="9.2" id="historique-du-projet"><span class="header-section-number">9.2</span> Historique du projet</h2>
<dl>
<dt>2019</dt>
<dd>Développement de l’<a href="http://jdavid.fr/projets/otletosphere.html">Otletosphère 1.0</a> par <a href="http://jdavid.fr">Jean David</a>.
</dd>
<dt>2020</dt>
<dd>Développement de l’<a href="https://hyperotlet.huma-num.fr/otletosphere/">Otletosphère 2.0</a> par <a href="https://myllaume.fr/">Guillaume Brioudes</a>.
</dd>
<dt>Février 2021</dt>
<dd>Réutilisation de l’Otletosphère par les étudiants de la LP MIND 2020-2021 sous la direction d’Arthur Perret. Développement de l’Opensphère comme projet central autonome.
</dd>
<dt>Juin 2021</dt>
<dd>Réusinage du code de génération de la visualisation avec la biliothèque D3 (en replacement de Vis.js) suite au développement de l’outil de cartographie documentaire <a href="https://github.com/hyperotlet/cosma">Cosma</a>.
</dd>
</dl>
<h2 data-number="9.3" id="bibliotheques-utilisees"><span class="header-section-number">9.3</span> Bibliothèques utilisées</h2>
<p>Pour améliorer la maintenabilité et la lisibilité du code source, l’équipe de développement a recouru aux bibliothèques suivantes. Elles sont été intégrées directement au code source de l’Opensphère et ne nécessitent par conséquent aucun téléchargement.</p>
<ul>
<li><a href="https://d3js.org/">d3</a> v4.13.0 (BSD 3-Clause) : réalisation de la visualisation.</li>
<li><a href="https://github.com/krisk/Fuse/">Fuse.js</a> v6.4.1 (licence Apache 2.0) : mise en place du moteur de recherche.</li>
<li><a href="https://github.com/twbs/bootstrap">Bootstrap Grid</a> v4.5.0 (licence MIT) : flexibilité de l’interface pour mobile.</li>
</ul>
</article>
</main>



</body>

</html>